image: circleci/android:api-28

#runner01 -> Docker runner
#GPU -> Mac mini runner

variables:
  GRADLE_OPTS: "-Dorg.gradle.daemon=false -Dorg.gradle.configureondemand=false -Dorg.gradle.parallel=false -Dandroid.enableBuildCache=false -Dorg.gradle.caching=false -Dorg.gradle.jvmargs=-Xmx2048m -XX:+HeapDumpOnOutOfMemoryError -Dfile.encoding=UTF-8"

cache:
  paths:
  - .m2/
  - .gradle/

stages:
- lint
- test

lint:
  stage: lint
  tags:
  - runner01
  script:
    - ./gradlew checkLint
  except:
  - master
  - schedules
  - tags
  - /^release.*$/

